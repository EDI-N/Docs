##############
API Документы
##############
Собрание методов для получения информации по документам.

| **Сокращения и условные обозначения:**
| GLN - Global Location Number (глобальный номер местоположения)
| ИНН - Идентификационный номер налогоплательщика            
| КПП - Код причины постановки на учет в разных налоговых органах
| GTIN - Global Trade Item Number (штрих-код)               

--------------

.. contents:: Содержание:

--------------

API предоставляет возможности для поиска по документам, создания и отправки черновика документа, получения списка цепочек документов, а также получение контента документа.
Преимущества API - скорость, безопасность и удобство. Вы можете обращаться к API через любой удобный для вас Rest клиент.

Применяемые https-коды ответов сервера с API (intCode):

-  200 — OK
-  400 — Ошибка в параметрах запроса
-  401 — Не авторизован, в запросе отсутствует token
-  403 — Нет доступа к запрашиваемой информации
-  404 — Запрашиваемая информация не найдена
-  500 — Внутренняя ошибка сервера
-  501 — Метод не существует
-  503 — Сервис недоступен, техническое обслуживание, повторите запрос позже

Время жизни токена в случае бездействия пользователя - 10 минут. В ответ пользователь получает json пакет с https кодом.

API для работы с платформой **EDIN 2.0**.

Обращение к методам API — это HTTPS-запрос к URL https://edo-v2.edi-n.com. Передаваемые в URL-запросе параметры являются обязательными, если не указано обратное (их опциональность).

-  Обмен данными происходит посредством запросов на сервер (в дальнейшем "API")
-  Обмен данными происходит в формате JSON
-  Возврат данных происходит в формате JSON
-  Передача изображений, печатных форм, неструкт. документов и подписей реализована в формате строки BASE64

--------------

**Проверки активности**
============

Проверка активности сервера:

.. code:: ruby

    curl -X GET 'https://edo-v2.edi-n.com/ping'

Проверка активности сессии:

.. code:: ruby

    curl -X GET 'https://edo-v2.edi-n.com/api/auth_check' -b 'SID=65daca25-74ba-4c85-8183-71b404a348c0;'

--------------





**Получение контента документа**
================================
Метод позволяет получить контент контента без подписей/печатей, тело подписи, тело печати. В запросе должен присутствовать один из идентификаторов авторизованного пользователя (GLN), ID документа (doc_uuid), а также HTTP-заголовок SID с необходимыми данными.

+-------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **Метод запроса** |                                                                                       HTTP GET                                                                                       |                                                                                                                                     |
+===================+======================================================================================================================================================================================+=====================================================================================================================================+
| **Content-Type**  | application/json                                                                                                                                                                     | тело запроса/ответа в json формате                                                                                                  |
+-------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **cURL запроса**  | curl -X GET 'https://edo-v2.edi-n.com/api/eds/doc/body?gln=9864065702429&doc_uuid=8c8a70e7-81c6-4382-8b58-7d60c3bc6ffd&body_type=JSON' -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb' | **gln** - строка(13); номер GLN организации, которая связана с авторизированным пользователем платформы EDIN 2.0 на уровне аккаунта |
|                   |                                                                                                                                                                                      |                                                                                                                                     |
|                   |                                                                                                                                                                                      | **doc_uuid** - строка; UUID документа                                                                                               |
|                   |                                                                                                                                                                                      |                                                                                                                                     |
|                   |                                                                                                                                                                                      | **body_type** - тип тела документа; возможные значения:                                                                             |
|                   |                                                                                                                                                                                      | -  ``CONTENT``: base64 контента без подписей/печатей                                                                                |
|                   |                                                                                                                                                                                      | -  ``JSON``: json документа                                                                                                         |
|                   |                                                                                                                                                                                      | -  ``SIGN``: base64 тело подписи                                                                                                    |
|                   |                                                                                                                                                                                      | -  ``STAMP``: base64 тело печати                                                                                                    |
|                   |                                                                                                                                                                                      | -  ``CRYPTED``: шифрованные исходные данные                                                                                         |
|                   |                                                                                                                                                                                      |                                                                                                                                     |
|                   |                                                                                                                                                                                      | **SID** - токен полученный при авторизации                                                                                          |
+-------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+





**Пример ответа:**

Возвращаемый текст – строка значений типа Base64.

.. code:: ruby

    пример отсутствует

--------------


**Создание черновика документа**
================================

+-------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **Метод запроса** |                                                                                                                HTTP POST                                                                                                                 |                                                                                                                                     |
+===================+==========================================================================================================================================================================================================================================+=====================================================================================================================================+
| **Content-Type**  | application/json                                                                                                                                                                                                                         | тело запроса/ответа в json формате                                                                                                  |
+-------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **cURL запроса**  | curl -X POST 'https://edo-v2.edi-n.com/api/eds/doc?gln=9864065702429&doc_type=orders&doc_number=sdsd334&doc_date=1505497243&recipient=9864065702428&family=edi' -d {json - тело документа} -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb' | **gln** - строка(13); номер GLN организации, которая связана с авторизированным пользователем платформы EDIN 2.0 на уровне аккаунта |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | **doc_type** - строка; конкретный тип документа                                                                                     |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | **doc_number** - строка; номер документа                                                                                            |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | **doc_date** - число; дата документа (в формате UNIX-timestamp)                                                                     |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | **recipient** - строка(13); gln получателя                                                                                          |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | **family** - строка; "группа" документов, возможные значения:                                                                       |
|                   |                                                                                                                                                                                                                                          | -  edi                                                                                                                              |
|                   |                                                                                                                                                                                                                                          | -  uzd                                                                                                                              |
|                   |                                                                                                                                                                                                                                          | -  reports                                                                                                                          |
|                   |                                                                                                                                                                                                                                          | -  certificats                                                                                                                      |
|                   |                                                                                                                                                                                                                                          | -  factoring                                                                                                                        |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | ["…"] - тело запроса - json документа                                                                                               |
|                   |                                                                                                                                                                                                                                          |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                          | **SID** - токен полученный при авторизации                                                                                          |
+-------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
**Пример тела запроса:**

.. code:: ruby

    {
	"NUMBER": "6422722fb78c4509b06eac43758e1545",
	"DATE": "2019-02-15",
	"TIME": "00:00",
	"ORDERNUMBER": "6422722fb78c4509b06eac43758e1545",
	"ORDERDATE": "2019-02-15",
	"DELIVERYDATE": "2019-02-30",
	"DELIVERYTIME": "10:00",
	"CAMPAIGNNUMBER": "334455",
	"CURRENCY": "UAH",
	"LIMES": [],
	"HEAD": [
		{
			"BUYER": "4820128010004",
			"SUPPLIER": "9864065702429",
			"DELIVERYPLACE": "4820128019007",
			"INVOICEPARTNER": "4820128010004",
			"SENDER": "4820128010004",
			"RECIPIENT": "9864065702429",
			"POSITION": [
				{
					"POSITIONNUMBER": "1",
					"PRODUCT": "5029053540900",
					"PRODUCTIDBUYER": "527209",
					"DESCRIPTION": "пироженко",
					"PRICE": 510,
					"PRICEWITHVAT": 571.2,
					"VAT": "12.00",
					"AMOUNT": 0,
					"AMOUNTWITHVAT": 0,
					"ORDEREDQUANTITY": 64,
					"ACCEPTEDQUANTITY": 64,
					"PRODUCTTYPE": "1"
				},
				{
					"POSITIONNUMBER": "2",
					"PRODUCT": "5029053540924",
					"PRODUCTIDBUYER": "527215",
					"DESCRIPTION": "мороженко",
					"PRICE": 510,
					"PRICEWITHVAT": 571.2,
					"VAT": "12.00",
					"AMOUNT": 0,
					"AMOUNTWITHVAT": 0,
					"ORDEREDQUANTITY": 32,
					"ACCEPTEDQUANTITY": 32,
					"PRODUCTTYPE": "1"
				},
				...
				{
					"POSITIONNUMBER": "48",
					"PRODUCT": "5029053543987",
					"PRODUCTIDBUYER": "100307632",
					"DESCRIPTION": "водочка",
					"PRICE": 1751.6,
					"PRICEWITHVAT": 1961.79,
					"VAT": "12.00",
					"AMOUNT": 0,
					"AMOUNTWITHVAT": 0,
					"ORDEREDQUANTITY": 12,
					"ACCEPTEDQUANTITY": 12,
					"PRODUCTTYPE": "1"
				}
			]
		}
	],
	"ACTION": "29"
}

--------------

**Пример ответа:**
Возвращаемый текст - ID созданного черновика(36 символов)

.. code:: ruby

    fb285cdb-31f8-4d59-b89b-77e30e608e12

--------------


**Отправка черновика**
======================

+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **Метод запроса** |                                                                                                                                                         HTTP PATCH                                                                                                                                                          |                                                                                                                                     |
+===================+=============================================================================================================================================================================================================================================================================================================================+=====================================================================================================================================+
| **Content-Type**  | application/json                                                                                                                                                                                                                                                                                                            | тело запроса/ответа в json формате                                                                                                  |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **cURL запроса**  | curl -X PATCH 'https://edo-v2.edi-n.com/api/eds/doc/send?gln=9864065702429&doc_uuid=8c8a70e7-81c6-4382-8b58-7d60c3bc6ffd&doc_hash=704DD5F0A71FCB730D2B1AEA84FEE3FB&chain_hash=704DD5F0A71FCB730D2B1AEA84FEE3FB&chain_uuid=8c8a70e7-81c6-4382-8b58-7d60c3bc6ffd&partner_id=11' -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb' | **gln** - строка(13); номер GLN организации, которая связана с авторизированным пользователем платформы EDIN 2.0 на уровне аккаунта |
|                   |                                                                                                                                                                                                                                                                                                                             |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                                                                                                             | **doc_uuid** - строка; UUID документа                                                                                               |
|                   |                                                                                                                                                                                                                                                                                                                             |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                                                                                                             | **doc_hash** - строка; хэш документа                                                                                                |
|                   |                                                                                                                                                                                                                                                                                                                             |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                                                                                                             | **chain_hash** - строка; хэш цепочки                                                                                                |
|                   |                                                                                                                                                                                                                                                                                                                             |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                                                                                                             | **chain_uuid** - строка; ID цепочки                                                                                                 |
|                   |                                                                                                                                                                                                                                                                                                                             |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                                                                                                             | **partner_id** - число; ID ритейлера или 0 если не ритейлер                                                                         |
|                   |                                                                                                                                                                                                                                                                                                                             |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                                                                                                             | **SID** - токен полученный при авторизации                                                                                          |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+

**Пример ответа:**

.. code:: ruby

    пример отсутствует

--------------

**Получение списка цепочек документов**
=======================================

+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **Метод запроса** |                                                                                                               HTTP GET                                                                                                                |                                                                                                                                     |
+===================+=======================================================================================================================================================================================================================================+=====================================================================================================================================+
| **Content-Type**  | application/json                                                                                                                                                                                                                      | тело запроса/ответа в json формате                                                                                                  |
+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+
| **cURL запроса**  | curl -X GET 'https://edo-v2.edi-n.com/api/eds/chains?gln=9864065702429&type=inbox&limit_count=3&limit_offset=0&date_from=2018-01-01&date_to=2018-12-31&sender=9864065703464&family=edi' -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb' | **gln** - строка(13); номер GLN организации, которая связана с авторизированным пользователем платформы EDIN 2.0 на уровне аккаунта |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **type** - тип выборки; возможные значения:                                                                                         |
|                   |                                                                                                                                                                                                                                       | -  important                                                                                                                        |
|                   |                                                                                                                                                                                                                                       | -  inbox                                                                                                                            |
|                   |                                                                                                                                                                                                                                       | -  outbox                                                                                                                           |
|                   |                                                                                                                                                                                                                                       | -  archive                                                                                                                          |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **family** - "группа" документов, возможные значения:                                                                               |
|                   |                                                                                                                                                                                                                                       | -  edi                                                                                                                              |
|                   |                                                                                                                                                                                                                                       | -  uzd                                                                                                                              |
|                   |                                                                                                                                                                                                                                       | -  reports                                                                                                                          |
|                   |                                                                                                                                                                                                                                       | -  certificats                                                                                                                      |
|                   |                                                                                                                                                                                                                                       | -  factoring                                                                                                                        |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **SID** - токен полученный при авторизации                                                                                          |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | Опционально:                                                                                                                        |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **limit_count** - число; лимит выборки                                                                                              |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **date_from** - строка; дата с (в формате YYYY-MM-dd)                                                                               |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **date_to** - строка; дата по (в формате YYYY-MM-dd)                                                                                |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **limit_offset** - число; смещение относительно верхней границы выборки                                                             |
|                   |                                                                                                                                                                                                                                       |                                                                                                                                     |
|                   |                                                                                                                                                                                                                                       | **sender** - строка(13); gln отправителя                                                                                            |
+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+

**Пример ответа:**

.. code:: ruby

    {"id":1005,"uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","packageID":0,"type":{"type":5,"title":"ordrsp","description":"Подтверждение заказа"},"docsCount":6,"lastInDocID":1005,"lastOutDocID":1055,"partnerId":9,"important":false,"status":{"status":2,"title":"sent"},"visualStatus":0,"archive":false,"childs":[{"body":{"forms":{}},"attachments":[],"comments":[],"doc_id":1005,"doc_uuid":"97c06d02-7c3c-4467-aaac-4a808078609f","uuidSender":"4820128010004","uuidReceiver":"9864065702429","docNumber":"6422722fb78c4509b06eac43758e1545","dateCreated":1549025901,"dateChanged":1549025901,"dateRead":0,"docDate":1550181600,"chain_id":1005,"chain_uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","family":1,"hash":"A1E7FAD0A57C43C3200DFF024AD4124F","type":{"type":2,"title":"orders","description":"Заказ"},"status":{"status":4,"title":"inbox"},"exchange_status":"000000000000000000000000","is_archive":false,"extraFields":{"buyer_uuid":"4820128010004","doc_num":"6422722fb78c4509b06eac43758e1545","order_number":"6422722fb78c4509b06eac43758e1545","ftpex_file_date":"1549025900","supplier_uuid":"9864065702429","delivery_place_uuid":"4820128019007","order_date":"1550181600","delivery_date":"1551477600","ftpex_file_name":"highload_orders_test.xml","contract_number":"334455","sender":"4820128010004","doc_date":"1550181600","recipient":"9864065702429","action":"0"},"tags":[],"statuses":[],"multiExtraFields":{}},{"body":{"forms":{}},"attachments":[],"comments":[],"doc_id":1029,"doc_uuid":"29a7311e-f6b8-4722-832e-d791e2c52c89","uuidSender":"9864065702429","uuidReceiver":"4820128010004","docNumber":"6422722fb78c4509b06eac43758e1545","dateCreated":1550237031,"dateChanged":1550239607,"dateRead":0,"docDate":1550244423,"chain_id":1005,"chain_uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","family":1,"hash":"02CD71409F5B5149035A39FC708D7BF9","type":{"type":5,"title":"ordrsp","description":"Подтверждение заказа"},"status":{"status":2,"title":"sent"},"exchange_status":"000000000000000000000000","is_archive":false,"extraFields":{},"tags":[],"statuses":[],"multiExtraFields":{}},{"body":{"forms":{}},"attachments":[],"comments":[],"doc_id":1051,"doc_uuid":"94c9f73b-ee51-48d0-81a2-a90c745533fd","uuidSender":"9864065702429","uuidReceiver":"4820128010004","docNumber":"Ð”Ðž000000001","dateCreated":1554980679,"dateChanged":1554980680,"dateRead":0,"docDate":1554991669,"chain_id":1005,"chain_uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","family":1,"hash":"2D8A99966AF07821580125ED2F065425","type":{"type":5,"title":"ordrsp","description":"Подтверждение заказа"},"status":{"status":2,"title":"sent"},"exchange_status":"000000000000000000000000","is_archive":false,"extraFields":{"order_date":"1550181600","delivery_date":"1551477600","contract_number":"334455","sender":"4820128010004","buyer_uuid":"4820128010004","doc_num":"ДО000000001","order_number":"6422722fb78c4509b06eac43758e1545","doc_date":"1554991669","action":"4","supplier_uuid":"9864065702429","delivery_place_uuid":"4820128019007"},"tags":[],"statuses":[],"multiExtraFields":{}},{"body":{"forms":{}},"attachments":[],"comments":[],"doc_id":1052,"doc_uuid":"8941f89d-3025-48c5-88c6-f2b21576272f","uuidSender":"9864065702429","uuidReceiver":"4820128010004","docNumber":"Ð”Ðž000000001","dateCreated":1554980725,"dateChanged":1554980725,"dateRead":0,"docDate":1554991676,"chain_id":1005,"chain_uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","family":1,"hash":"ABC0669F139872436733C405C997CD00","type":{"type":4,"title":"desadv","description":"Уведомление об отгрузке"},"status":{"status":2,"title":"sent"},"exchange_status":"000000000000000000000000","is_archive":false,"extraFields":{"order_date":"1550181600","delivery_date":"1551477600","summ":"2 037 688.28","contract_number":"334455","sender":"4820128010004","buyer_uuid":"4820128010004","doc_num":"ДО000000001","order_number":"6422722fb78c4509b06eac43758e1545","doc_date":"1554991676","supplier_uuid":"9864065702429","delivery_place_uuid":"4820128019007"},"tags":[],"statuses":[],"multiExtraFields":{}},{"body":{"forms":{}},"attachments":[],"comments":[],"doc_id":1053,"doc_uuid":"f5026aca-8b88-4535-a1f4-28903f03adbc","uuidSender":"9864065702429","uuidReceiver":"4820128010004","docNumber":"Ð”Ðž000000001","dateCreated":1554980895,"dateChanged":1554980896,"dateRead":0,"docDate":1554991676,"chain_id":1005,"chain_uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","family":1,"hash":"72E3DDD6F4CFC6037037710D34940355","type":{"type":1,"title":"invoice","description":"Счет"},"status":{"status":2,"title":"sent"},"exchange_status":"000000000000000000000000","is_archive":false,"extraFields":{"order_date":"1550181600","delivery_date":"1551477600","summ":"2 037 688.28","contract_number":"334455","sender":"4820128010004","buyer_uuid":"4820128010004","doc_num":"ДО000000001","order_number":"6422722fb78c4509b06eac43758e1545","doc_date":"1554991676","supplier_uuid":"9864065702429","delivery_place_uuid":"4820128019007"},"tags":[],"statuses":[],"multiExtraFields":{}},{"body":{"forms":{}},"attachments":[],"comments":[],"doc_id":1055,"doc_uuid":"8c956e06-d681-4389-868e-ab27e587b3bb","uuidSender":"9864065702429","uuidReceiver":"4820128010004","docNumber":"6422722fb78c4509b06eac43758e1545","dateCreated":1555406695,"dateChanged":1555407136,"dateRead":0,"docDate":1550188800,"chain_id":1005,"chain_uuid":"73ee333d-ca3d-4c93-97fa-0b75d58b0ff3","family":1,"hash":"765B2DEFE72AEA34CA4A8507E473E76F","type":{"type":5,"title":"ordrsp","description":"Подтверждение заказа"},"status":{"status":2,"title":"sent"},"exchange_status":"000000000000000000000000","is_archive":false,"extraFields":{"order_date":"1550181600","delivery_date":"1551477600","contract_number":"334455","sender":"4820128010004","buyer_uuid":"4820128010004","doc_num":"6422722fb78c4509b06eac43758e1545","order_number":"6422722fb78c4509b06eac43758e1545","doc_date":"1550188800","action":"29","supplier_uuid":"9864065702429","delivery_place_uuid":"4820128019007"},"tags":[],"statuses":[],"multiExtraFields":{}}],"hash":"48800BFDDF4C38598D723A42F0384F03"}

--------------

**Дополнения**
==============

.. _Таблица_2:

Таблица 2 - Таблица параметров (фильтр), которые передаются в json-формате в POST запросе метода **/api/eds/docs/search**, а также **api/eds/chains/search**

+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
|     |    Параметр     | Тип_ |                    Формат                    |                                                        Описание                                                         |
+=====+=================+======+==============================================+=========================================================================================================================+
| 1   | direction       | M    | direction {receiver[], sender[], type}       | указываются отправитель, получатель и связь между ними в критериях отбора документов                                    |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2   | receiver        | M    | receiver ["..."]                             | массив GLN получателей - обязательный, но может быть пустым если указан массив GLN отправителей (sender)                |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 3   | sender          | M    | sender ["..."]                               | массив GLN отправителей, может быть пустым (если указан массив GLN получателей)                                         |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 4   | type            | M    | "EQ" / "OR" / "IN"                           | тип выборки; возможные значения:                                                                                        |
|     |                 |      |                                              | EQ - отбираются только документы в которых совпадают указанные И sender, И receiver                                     |
|     |                 |      |                                              | OR - отбираются документы в которых совпадают ИЛИ sender, ИЛИ receiver                                                  |
|     |                 |      |                                              | IN - отбираются документы в которых sender или receiver один из тех, которые указаны в массивах sender и receiver       |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 5   | statuses        | M    | statuses [ ]                                 | список статусов (состояний) документов, по которым будет происходить отбор:                                             |
|     |                 |      |                                              | 0 - все                                                                                                                 |
|     |                 |      |                                              | 1 - open                                                                                                                |
|     |                 |      |                                              | 2 - sent                                                                                                                |
|     |                 |      |                                              | 3 - delivered                                                                                                           |
|     |                 |      |                                              | 4 - inbox                                                                                                               |
|     |                 |      |                                              | 5 - read                                                                                                                |
|     |                 |      |                                              | 6 - error                                                                                                               |
|     |                 |      |                                              | 7 - deleted                                                                                                             |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 6   | type            | M    | type [ { } ]                                 | список типов документов:                                                                                                |
|     |                 |      |                                              | 0 - все типы                                                                                                            |
|     |                 |      |                                              | 1 / 2 / 3 ... и более - конкретный тип документа из [[doc_types>>doc:Tables.Exite_Tables.exite_main.doc_types.WebHome]] |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 7   | limit           | O    | limit {offset, count}                        | фильтр отбора                                                                                                           |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 8   | offset          | O    | int                                          | смещение относительно верхней границы выборки                                                                           |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 9   | count           | O    | int                                          | лимит выборки                                                                                                           |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 10  | family          | O    | 1 / 2 / 3 / 4 / 5                            | возможные значения (может отсутствовать):                                                                               |
|     |                 |      |                                              | 1 - edi                                                                                                                 |
|     |                 |      |                                              | 2 - uzd                                                                                                                 |
|     |                 |      |                                              | 3 - reports                                                                                                             |
|     |                 |      |                                              | 4 - certificats                                                                                                         |
|     |                 |      |                                              | 5 - factoring                                                                                                           |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 11  | number          | O    | String                                       | номер документа, можно не указывать в критериях отбора                                                                  |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 12  | docDate         | O    | docDate {startTimestamp, finishTimestamp}    | дата документа (в формате UNIX-timestamp) с / по, можно не указывать в критериях отбора                                 |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 13  | startTimestamp  | O    | String                                       | дата документа с                                                                                                        |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 14  | finishTimestamp | O    | String                                       | дата документа по                                                                                                       |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 15  | docCreate       | O    | docCreate {startTimestamp, finishTimestamp}  | дата создания документа (в формате UNIX-timestamp) с / по, можно не указывать в критериях отбора                        |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 18  | docRead         | O    | docRead {startTimestamp, finishTimestamp}    | дата прочтения документа (в формате UNIX-timestamp) с / по, можно не указывать в критериях отбора                       |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 21  | docChanged      | O    | docChanged {startTimestamp, finishTimestamp} | дата изменения документа (в формате UNIX-timestamp) с / по, можно не указывать в критериях отбора                       |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 24  | exchangeStatus  | O    | int                                          | список состояний документооборота, может не указываться                                                                 |
+-----+-----------------+------+----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+

.. _Тип:

***Тип*** поля: **M** - mandatory (обязательное к заполнению), **O** - optional (опциональное)

--------------
13